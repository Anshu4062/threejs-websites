import{ENDPOINT as t,FLAG as n,FLUSH_TIMEOUT as e,GZIP_MIN_LEN as r,MAX_QUEUE_SIZE as o,SESSION_EXPIRE_TIMEOUT as c,UNKNOWN as i,VERSION as s,_Array as u,_Map as l,_Object as f,_isArray as a,_mapGet as p,_mapHas as h,_mapSet as y,_null as g,_objectHasOwnProperty as d,_objectToString as m,_performance as w,_window as _,debounce as b,functionProto as v,isSSR as E,onHidden as S,onIdle as k}from"./chunk-LMF7QUFI.mjs";import*as O from"react";var j=()=>{if(E)return g;const t={id:Math.random().toString(36).substring(2)+Date.now(),url:_.location.toString(),wifi:navigator.connection?.effectiveType||i,cpu:navigator.hardwareConcurrency,mem:navigator.deviceMemory,gpu:i};return k((()=>{t.gpu=(()=>{if(!("chrome"in _))return"";const t=document.createElement("canvas").getContext("webgl",{powerPreference:"high-performance"});if(!t)return"";const n=t.getExtension("WEBGL_debug_renderer_info");return n?t.getParameter(n.UNMASKED_RENDERER_WEBGL):""})()})),t},C="application/json",R="function"==typeof CompressionStream,D=async(t,n)=>{const e={ok:!1};if(E)return e;let o=g;const c=JSON.stringify(n,((t,n)=>{if("k"===t&&(o=n),null!=n&&!1!==n&&"n"!==t||2===o)return n})),i=c.length>r,s=i&&R?await(async t=>{const n=new Blob([t],{type:C}).stream().pipeThrough(new CompressionStream("gzip"));return new Response(n).arrayBuffer()})(c):c;if(!navigator.onLine)return e;return fetch(t,{body:s,method:"POST",keepalive:!0,priority:"low",mode:"no-cors",headers:{"Content-Type":C,"Content-Encoding":i?"gzip":void 0}})};import*as N from"react";var L="Symbol(react.",$=L+"element)",M=L+"forward_ref)",T=L+"lazy)",U=L+"memo)";function B(){try{const t=N.useRef();return N.useState((()=>{const n=v.bind;v.bind=function(e,r){return e===g&&"function"==typeof r?.type&&(t.current=r,v.bind=n),n.apply(this,arguments)}})),t.current}catch(t){return g}}var I=t=>{const n=t?.actualDuration??0;let e=n,r=t?.child;for(;n>0&&r!=g;)e-=r?.actualDuration||0,r=r.sibling;return{t:n,s:e}},W=t=>{let e=t?._debugOwner?.type;if(!e){const t=N.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner.current;e=t?._debugOwner?.type}return e&&"function"==typeof e&&e[n]||g},x=(t,n)=>t.length>n?t.slice(0,n)+"…":t,A=t=>{switch(typeof t){case"function":return x(t.toString(),20);case"string":return x(t,20);case"object":if(t===g)return"null";if(u.isArray(t))return t.length>0?"[…]":"[]";if("symbol"==typeof t.$$typeof&&String(t.$$typeof)===$)return"<"+(t.type.displayName||t.type.name||"")+(f.keys(t.props).length>0?" …":"")+">";if("object"==typeof t&&t!==g&&t.constructor===f){for(const n in t)if(d.call(t,n))return"{…}";return"{}"}const n=m.call(t).slice(8,-1);if("Object"===n){const n=f.getPrototypeOf(t)?.constructor;if("function"==typeof n)return(n.displayName||n.name||"")+"{…}"}return n+"{…}";default:return String(t)}},F=t=>{if("function"==typeof t)return t;if("object"!=typeof t)return g;const n=t.type;if("function"==typeof n)return n;if("object"!=typeof n)return g;if("$$typeof"in n)switch(String(n.$$typeof)){case M:return F(t.type.render);case U:case T:return F(t.type)}return g},P=(t,n)=>{"function"==typeof t?t(n):null!=t&&(t.current=n)},z=(t,n)=>{const e=f.assign({},n);for(const r in n){const o=t[r],c=n[r];r.startsWith("on")?o&&c?e[r]=function(){c.apply(this,arguments),o.apply(this,arguments)}:o&&(e[r]=o):"style"===r?e[r]=Object.assign(c,o):"className"===r&&(e[r]=[o,c].filter(Boolean).join(" "))}return f.assign(e,t)},K=[],G=new MessageChannel,q=function(){this.postMessage(void 0)}.bind(G.port2);G.port1.onmessage=()=>{const t=K;K=[];for(let n=0,e=t.length;n<e;n++)t[n]()},G=null;var J,Q,V=t=>{1===K.push(t)&&requestAnimationFrame(q)},Y=new l,H=new l,X=[],Z=!1,tt=j(),nt=g,et=g,rt=(t,n)=>{if(f.is(t,n))return g;const e=A(t),r=A(n),o=n?typeof n:typeof t;return{u:e===r&&["object","function"].includes(o),t:o,c:1,i:g,n:e===r?e:e+r}},ot=(t,e,r)=>"function"!=typeof e||n in e?e:(e[n]=!0,function(){const n=w.now();try{const o=e.apply(this,arguments),c=w.now();return V((()=>{const e=c-n,o=w.now()-n;ut(t,128,r,null,g,e,o,1,null,null,null,[])})),o}catch(n){throw ut(t,256,r,null,g,0,0,1,null,null,n.message.split("\n")[0],[]),n}}),ct=class extends O.Component{constructor(t){super(t),this.m=w.now()}componentDidMount(){const t=this.m;if(t){const n=w.now()-t;V((()=>{this.props._r?.(64,n,w.now()-t)})),this.m=void 0}}shouldComponentUpdate(){return this.m&&(this.u=w.now()),!0}componentDidUpdate(){const t=this.u;if(t){const n=w.now()-t;V((()=>{this.props._r?.(64,n,w.now()-t)})),this.u=void 0}}componentWillUnmount(){const t=w.now();V((()=>{const n=w.now()-t;this.props._r?.(64,n,n)}))}render(){return this.props.children}},it=O.forwardRef(((t,n)=>{const e=t._l,r=e.ref;if(O.isValidElement(e)){let o=r;n&&(o=t=>{P(r,t),P(n,t)});const c=f.assign(z(e.props,t),{ref:o});return c._r=void 0,c._l=void 0,O.createElement(ct,{key:e.key,_r:t._r,children:O.cloneElement(e,c)})}return t.children})),st=(t,e,r,o,c,i,s)=>{if(E)return;const u=(t=>p.call(H,t))(e);return u?512&t?(t=>{O.useEffect((()=>{if(t)return t.i++,()=>{t.i--}}),[])})(u):2&t?((t,n,e,r,o)=>{if("object"!=typeof e)return e;const c=n.c[o],i=B(),s=W(i);if(c){const n=[];for(const t in e){const r=c[t],o=e[t],i=rt(r,o);i&&(i.n=t,n.push(i))}if(n.length){const{s:e,t:o}=I(i);ut(t,2,r,g,g,e,o,1,g,s,g,n)}}return n.c[o]=e,e})(e,u,r,o,s):4&t?((t,n,e,r,o)=>{if(!a(e))return e;const c=B(),i=W(c),s=e[1];return n.c[o]=e[0],e[1]=function(n){const o=e[0];s(n);const u=rt(o,n);if(!u)return;const{s:l,t:f}=I(c);ut(t,4,r,g,g,l,f,1,g,i,g,[u])},e})(e,u,r,o,s):1&t?((t,n,e,r,o,c)=>{if(!a(e))return e;const i=n.c[c],s=B(),u=W(s),{s:l,t:f}=I(s);if(i){const n=[];for(let t=0,r=e.length;t<r;t++){const r=i[t],o=e[t],c=rt(r,o);c&&n.push(c)}n.length&&ut(t,1,r,g,o,l,f,1,g,u,g,n)}return n.c[c]=e,e})(e,u,r,o,i,s):16&t?((t,e,r,o,c,i)=>{const s=W(null),u=F(r),l=u?.[n];return O.createElement(it,{_l:r,key:r.key||void 0,_r:(n,r,f)=>{const a=[],p=e.c[i];if(p){const t=rt(p,u);if(!t)return;a.push(t)}ut(t,n,o,c,g,r,f,1,l,s,g,a),e.c[e.i]=u}})})(e,u,r,o,c,s):8&t?((t,n,e,r,o)=>{const c=W(g),i=n.c[o];if(i){const n=rt(i,e);if(!n)return e;ut(t,8,r,g,g,0,0,1,g,c,g,[n])}return n.c[o]=e,e})(e,u,r,o,s):128&t?ot(e,r,o):r:r},ut=(t,n,e,r,c,i,s,u,f,a,g,d)=>{const m={k:n,l:e,l2:r,ls:c,s:i,t:s,c:u,i:f,o:a,e:g,d:d},w=((t,n,e,r,o)=>t+"."+n+"."+e+"."+(r||"")+"."+(o||""))(t,n,e,a,g);if(h.call(Y,w)){const t=p.call(Y,w),n=X[t].r;return n.c++,n.t+=m.t,n.s+=m.s,void(n.d=((t,n)=>{if(!t&&!n)return[];if(!t?.length)return n;if(!n?.length)return t;let e=0,r=0,o=t.length-1,c=n.length-1;for(;e<o&&r<c;){const i=t[e],s=n[r],u=t[o-1],l=n[c-1];if(i.n===s.n)i.c+=s.c,i.u||(i.u=s.u),e++,r++;else{if(u.n!==l.n)break;u.c+=l.c,u.u||(u.u=l.u),o--,c--}}const i=new l;for(;e<o;e++)y.call(i,t[e].n,e);for(;r<c;r++){const e=n[r],o=p.call(i,e.n);if(void 0===o){const n=t.push(e);y.call(i,e.n,n);continue}const c=t[o];c.c++,c.u||(c.u=e.u)}return t})(n.d,m.d))}y.call(Y,w,X.length);const _={k:t,r:m};X.length>=o?lt():(X.push(_),et?.())},lt=()=>{const t=X.length;if(nt&&navigator.onLine&&t&&J){try{const t=f.create(g);H.forEach(((n,e)=>{t[e]=n.i}));const n={batch:X,components:t,session:tt,buildId:Q,apiKey:J,version:s,react:O.version||i,geo:void 0};D(nt,n).then((()=>{0})).catch((()=>{}))}catch(t){}ft()}},ft=()=>{X.length=0,Y.clear()},at=(t,e,r)=>{if(E)return;if(h.call(H,t))return;r&&!(n in r)&&(r[n]=t);const o=e?new u(e):g;y.call(H,t,{r:r,c:o,i:0})},pt=r=>{if(E)return;if(_[n]=!0,nt=r?.url||nt||t,Q||=r?.id,J=r?.apiKey,Z)return;Z=!0;const o=()=>k(lt);S(o);const i=b(o,e),s=b((()=>{tt=j()}),c);et=()=>{i(),s()}};export{st as capture,pt as init,at as registerMetadata,ft as reset};